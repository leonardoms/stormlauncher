
#include "stormlauncher.h"

unsigned char
stormlauncher_cmd_ledon[] = { 0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00 };

unsigned char
stormlauncher_cmd_ledoff[] = { 0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00 };

unsigned char
stormlauncher_cmd_stop[] = { 0x02,0x20,0x00,0x00,0x00,0x00,0x00,0x00 };

unsigned char
stormlauncher_cmd_left[] = { 0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00 };

unsigned char
stormlauncher_cmd_right[] = { 0x02,0x08,0x00,0x00,0x00,0x00,0x00,0x00 };

unsigned char
stormlauncher_cmd_up[] = { 0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x00 };

unsigned char
stormlauncher_cmd_down[] = { 0x02,0x01,0x00,0x00,0x00,0x00,0x00,0x00 };

unsigned char
stormlauncher_cmd_fire[] = { 0x02,0x10,0x00,0x00,0x00,0x00,0x00,0x00 };

unsigned char
stormlauncher_open(stormLauncher_t* sl) {

	libusb_init( &sl->ctx );
	sl->hnd = libusb_open_device_with_vid_pid( sl->ctx, VENDOR_ID, PRODUCT_ID );

	if( sl->hnd == NULL )
		return FALSE;

	return TRUE;
}

void
stormlauncher_send(stormLauncher_t* sl, unsigned char* cmd) {
	libusb_control_transfer( sl->hnd, 0x21, 0x09, 0, 0, cmd, 8, 1000 );
}
